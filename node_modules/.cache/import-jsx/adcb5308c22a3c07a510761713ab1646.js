const React = require('react');
const ms = require('ms');
const importJSX = require('@isaacs/import-jsx');
const {
  useStdout,
  Box,
  Text
} = require('ink');
const Parser = require('tap-parser');
const chalk = require('chalk');

// Pull in all the tags here so we can re-export them
const AssertCounts = importJSX('./assert-counts.js');
const AssertName = importJSX('./assert-name.js');
const Counts = importJSX('./counts.js');
const Footer = importJSX('./footer.js');
const Log = importJSX('./log.js');
const PassFail = importJSX('./pass-fail.js');
const Result = importJSX('./result.js');
const Runs = importJSX('./runs.js');
const StatusMark = importJSX('./status-mark.js');
const SuiteCounts = importJSX('./suite-counts.js');
const Summary = importJSX('./summary.js');
const TestPoint = importJSX('./test-point.js');
const Test = importJSX('./test.js');
class Base extends React.Component {
  get Summary() {
    return Summary;
  }
  get Runs() {
    return Runs;
  }
  get Log() {
    return Log;
  }
  get Footer() {
    return Footer;
  }
  constructor({
    tap
  }) {
    super();
    this.mounted = false;
    this.state = {
      // the stuff in the static section.  most importantly, errors in
      // real time, but also console output, test summaries, etc.
      log: [],
      // all tests, done and queued
      tests: [],
      // currently running
      runs: [],
      // tap.results at the end
      results: null,
      // counts of all relevant test points
      // debounced on this.assertCounts
      assertCounts: {
        total: 0,
        pass: 0,
        fail: 0,
        skip: 0,
        todo: 0
      },
      // a count of all the test suites run
      suiteCounts: {
        total: 0,
        pass: 0,
        fail: 0,
        skip: 0,
        todo: 0
      },
      // total elapsed time
      time: 0,
      bailout: null
    };
    this.start = Date.now();
    this.timer = setInterval(() => this.setState(prevState => ({
      ...prevState,
      time: this.time,
      assertCounts: this.assertCounts
    })), 200);

    // keep counters on the object itself, to debounce
    this.assertCounts = {
      total: 0,
      pass: 0,
      fail: 0,
      skip: 0,
      todo: 0
    }, this.counterBouncer = null;
    tap.on('subtestAdd', t => this.addTest(t));
    tap.on('subtestStart', t => this.startTest(t));
    tap.on('subtestEnd', t => this.endTest(t));
    tap.on('end', () => this.endAll(tap));
    tap.once('bailout', message => this.bailout(message));

    // Handle data that might come out of the tap object itself.
    tap.on('extra', this.onRaw(tap, 1));
    tap.parser.on('result', res => {
      if (res.fullname === 'TAP') {
        this.logRes(tap, res);
        this.inc(res.todo ? 'todo' : res.skip ? 'skip' : res.ok ? 'pass' : 'fail');
      }
    });

    // consume the text stream, but ignore it.
    // we get all we need from the child test objects.
    this.tapResume(tap);
  }
  tapResume(tap) {
    tap.resume();
  }
  get time() {
    return Date.now() - this.start;
  }
  componentDidMount() {
    this.mounted = true;
  }
  componentWillUnmount() {
    this.mounted = false;
    clearTimeout(this.counterBouncer);
    clearInterval(this.timer);
  }
  bailout(bailout, test = null) {
    this.bailedOut = bailout;
    return this.setState(prevState => prevState.bailout ? prevState : {
      ...prevState,
      runs: test ? prevState.runs.filter(t => t.childId !== test.childId) : [],
      // if we bail out, then we should only show the bailout,
      // or the counts get confusing, because we never receive a testEnd
      // for the other ones.
      tests: prevState.tests.filter(t => test ? t.childId === test.childId : t.results && t.results.bailout === bailout),
      bailout,
      assertCounts: this.assertCounts,
      time: this.time
    });
  }
  inc(type) {
    this.assertCounts.total++;
    this.assertCounts[type]++;
    if (this.counterBouncer) return;
    this.counterBouncer = setTimeout(() => {
      this.counterBouncer = null;
      this.setState(prevState => ({
        ...prevState,
        assertCounts: this.assertCounts
      }));
    }, 50);
  }
  addTest(test) {
    this.setState(prevState => ({
      ...prevState,
      tests: prevState.tests.concat(test),
      suiteCounts: {
        ...prevState.suiteCounts,
        total: prevState.suiteCounts.total + 1
      },
      assertCounts: this.assertCounts,
      time: this.time
    }));
    test.on('preprocess', options => options.stdio = 'pipe').on('process', proc => {
      proc.stderr.setEncoding('utf8');
      proc.stderr.on('data', this.onRaw(test, 2));
    }).parser.on('extra', this.onRaw(test, 1)).on('pass', res => this.inc('pass')).on('todo', res => (this.inc('todo'), this.logRes(test, res))).on('skip', res => (this.inc('skip'), this.logRes(test, res))).on('fail', res => (this.inc('fail'), this.logRes(test, res)));
  }
  onRaw(test, fd) {
    const p = ` ${fd}>`;
    return raw => {
      const pref = chalk.bold.dim(test.name + p + ' ');
      raw = raw.replace(/\n$/, '').replace(/^/gm, pref);
      this.setState(prevState => ({
        ...prevState,
        log: prevState.log.concat({
          raw
        }),
        assertCounts: this.assertCounts
      }));
    };
  }
  logRes(test, res) {
    res.testName = test.name;
    this.setState(prevState => ({
      ...prevState,
      log: prevState.log.concat({
        res
      }),
      assertCounts: this.assertCounts,
      time: this.time
    }));
  }
  startTest(test) {
    test.startTime = Date.now();
    test.once('bailout', message => this.bailout(message, test));
    this.setState(prevState => prevState.bailout ? prevState : {
      ...prevState,
      runs: prevState.runs.concat(test),
      assertCounts: this.assertCounts
    });
  }
  endTest(test) {
    test.endTime = Date.now();

    // put it in the appropriate bucket.
    // live update assertion handed by tap.parser event
    const ok = test.results && test.results.ok;
    const skip = test.options.skip && ok !== false;
    const todo = test.options.todo && ok !== false;
    const bucket = skip ? 'skip' : todo ? 'todo' : !ok ? 'fail' : 'pass';
    this.setState(prevState => prevState.bailout ? prevState : {
      ...prevState,
      log: prevState.log.concat({
        test
      }),
      runs: prevState.runs.filter(t => t.childId !== test.childId),
      suiteCounts: {
        ...prevState.suiteCounts,
        [bucket]: prevState.suiteCounts[bucket] + 1
      },
      time: this.time,
      assertCounts: this.assertCounts
    });
  }
  endAll(tap) {
    clearInterval(this.timer);
    clearInterval(this.counterBouncer);
    this.setState(prevState => ({
      ...prevState,
      results: tap.results,
      assertCounts: this.assertCounts,
      time: tap.time || this.time
    }));
  }
  render() {
    const {
      Log,
      Runs,
      Summary,
      Footer
    } = this;
    return /*#__PURE__*/React.createElement(Box, {
      flexDirection: "column"
    }, /*#__PURE__*/React.createElement(Log, {
      log: this.state.log
    }), /*#__PURE__*/React.createElement(Runs, {
      runs: this.state.runs
    }), this.state.results ? /*#__PURE__*/React.createElement(Summary, {
      tests: this.state.tests,
      results: this.state.results
    }) : /*#__PURE__*/React.createElement(Text, null), /*#__PURE__*/React.createElement(Footer, {
      suiteCounts: this.state.suiteCounts,
      assertCounts: this.state.assertCounts,
      time: this.state.time
    }));
  }
}
Base.AssertCounts = AssertCounts;
Base.AssertName = AssertName;
Base.Counts = Counts;
Base.Footer = Footer;
Base.Log = Log;
Base.PassFail = PassFail;
Base.Result = Result;
Base.Runs = Runs;
Base.StatusMark = StatusMark;
Base.SuiteCounts = SuiteCounts;
Base.Summary = Summary;
Base.TestPoint = TestPoint;
Base.Test = Test;
module.exports = Base;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFjdCIsInJlcXVpcmUiLCJtcyIsImltcG9ydEpTWCIsInVzZVN0ZG91dCIsIkJveCIsIlRleHQiLCJQYXJzZXIiLCJjaGFsayIsIkFzc2VydENvdW50cyIsIkFzc2VydE5hbWUiLCJDb3VudHMiLCJGb290ZXIiLCJMb2ciLCJQYXNzRmFpbCIsIlJlc3VsdCIsIlJ1bnMiLCJTdGF0dXNNYXJrIiwiU3VpdGVDb3VudHMiLCJTdW1tYXJ5IiwiVGVzdFBvaW50IiwiVGVzdCIsIkJhc2UiLCJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInRhcCIsIm1vdW50ZWQiLCJzdGF0ZSIsImxvZyIsInRlc3RzIiwicnVucyIsInJlc3VsdHMiLCJhc3NlcnRDb3VudHMiLCJ0b3RhbCIsInBhc3MiLCJmYWlsIiwic2tpcCIsInRvZG8iLCJzdWl0ZUNvdW50cyIsInRpbWUiLCJiYWlsb3V0Iiwic3RhcnQiLCJEYXRlIiwibm93IiwidGltZXIiLCJzZXRJbnRlcnZhbCIsInNldFN0YXRlIiwicHJldlN0YXRlIiwiY291bnRlckJvdW5jZXIiLCJvbiIsInQiLCJhZGRUZXN0Iiwic3RhcnRUZXN0IiwiZW5kVGVzdCIsImVuZEFsbCIsIm9uY2UiLCJtZXNzYWdlIiwib25SYXciLCJwYXJzZXIiLCJyZXMiLCJmdWxsbmFtZSIsImxvZ1JlcyIsImluYyIsIm9rIiwidGFwUmVzdW1lIiwicmVzdW1lIiwiY29tcG9uZW50RGlkTW91bnQiLCJjb21wb25lbnRXaWxsVW5tb3VudCIsImNsZWFyVGltZW91dCIsImNsZWFySW50ZXJ2YWwiLCJ0ZXN0IiwiYmFpbGVkT3V0IiwiZmlsdGVyIiwiY2hpbGRJZCIsInR5cGUiLCJzZXRUaW1lb3V0IiwiY29uY2F0Iiwib3B0aW9ucyIsInN0ZGlvIiwicHJvYyIsInN0ZGVyciIsInNldEVuY29kaW5nIiwiZmQiLCJwIiwicmF3IiwicHJlZiIsImJvbGQiLCJkaW0iLCJuYW1lIiwicmVwbGFjZSIsInRlc3ROYW1lIiwic3RhcnRUaW1lIiwiZW5kVGltZSIsImJ1Y2tldCIsInJlbmRlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0JylcbmNvbnN0IG1zID0gcmVxdWlyZSgnbXMnKVxuY29uc3QgaW1wb3J0SlNYID0gcmVxdWlyZSgnQGlzYWFjcy9pbXBvcnQtanN4JylcbmNvbnN0IHt1c2VTdGRvdXQsIEJveCwgVGV4dH0gPSByZXF1aXJlKCdpbmsnKVxuY29uc3QgUGFyc2VyID0gcmVxdWlyZSgndGFwLXBhcnNlcicpXG5jb25zdCBjaGFsayA9IHJlcXVpcmUoJ2NoYWxrJylcblxuLy8gUHVsbCBpbiBhbGwgdGhlIHRhZ3MgaGVyZSBzbyB3ZSBjYW4gcmUtZXhwb3J0IHRoZW1cbmNvbnN0IEFzc2VydENvdW50cyA9IGltcG9ydEpTWCgnLi9hc3NlcnQtY291bnRzLmpzJylcbmNvbnN0IEFzc2VydE5hbWUgPSBpbXBvcnRKU1goJy4vYXNzZXJ0LW5hbWUuanMnKVxuY29uc3QgQ291bnRzID0gaW1wb3J0SlNYKCcuL2NvdW50cy5qcycpXG5jb25zdCBGb290ZXIgPSBpbXBvcnRKU1goJy4vZm9vdGVyLmpzJylcbmNvbnN0IExvZyA9IGltcG9ydEpTWCgnLi9sb2cuanMnKVxuY29uc3QgUGFzc0ZhaWwgPSBpbXBvcnRKU1goJy4vcGFzcy1mYWlsLmpzJylcbmNvbnN0IFJlc3VsdCA9IGltcG9ydEpTWCgnLi9yZXN1bHQuanMnKVxuY29uc3QgUnVucyA9IGltcG9ydEpTWCgnLi9ydW5zLmpzJylcbmNvbnN0IFN0YXR1c01hcmsgPSBpbXBvcnRKU1goJy4vc3RhdHVzLW1hcmsuanMnKVxuY29uc3QgU3VpdGVDb3VudHMgPSBpbXBvcnRKU1goJy4vc3VpdGUtY291bnRzLmpzJylcbmNvbnN0IFN1bW1hcnkgPSBpbXBvcnRKU1goJy4vc3VtbWFyeS5qcycpXG5jb25zdCBUZXN0UG9pbnQgPSBpbXBvcnRKU1goJy4vdGVzdC1wb2ludC5qcycpXG5jb25zdCBUZXN0ID0gaW1wb3J0SlNYKCcuL3Rlc3QuanMnKVxuXG5jbGFzcyBCYXNlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgZ2V0IFN1bW1hcnkgKCkge1xuICAgIHJldHVybiBTdW1tYXJ5XG4gIH1cbiAgZ2V0IFJ1bnMgKCkge1xuICAgIHJldHVybiBSdW5zXG4gIH1cbiAgZ2V0IExvZyAoKSB7XG4gICAgcmV0dXJuIExvZ1xuICB9XG4gIGdldCBGb290ZXIgKCkge1xuICAgIHJldHVybiBGb290ZXJcbiAgfVxuXG4gIGNvbnN0cnVjdG9yICh7IHRhcCB9KSB7XG4gICAgc3VwZXIoKVxuXG4gICAgdGhpcy5tb3VudGVkID0gZmFsc2VcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgLy8gdGhlIHN0dWZmIGluIHRoZSBzdGF0aWMgc2VjdGlvbi4gIG1vc3QgaW1wb3J0YW50bHksIGVycm9ycyBpblxuICAgICAgLy8gcmVhbCB0aW1lLCBidXQgYWxzbyBjb25zb2xlIG91dHB1dCwgdGVzdCBzdW1tYXJpZXMsIGV0Yy5cbiAgICAgIGxvZzogW10sXG5cbiAgICAgIC8vIGFsbCB0ZXN0cywgZG9uZSBhbmQgcXVldWVkXG4gICAgICB0ZXN0czogW10sXG5cbiAgICAgIC8vIGN1cnJlbnRseSBydW5uaW5nXG4gICAgICBydW5zOiBbXSxcblxuICAgICAgLy8gdGFwLnJlc3VsdHMgYXQgdGhlIGVuZFxuICAgICAgcmVzdWx0czogbnVsbCxcblxuICAgICAgLy8gY291bnRzIG9mIGFsbCByZWxldmFudCB0ZXN0IHBvaW50c1xuICAgICAgLy8gZGVib3VuY2VkIG9uIHRoaXMuYXNzZXJ0Q291bnRzXG4gICAgICBhc3NlcnRDb3VudHM6IHtcbiAgICAgICAgdG90YWw6IDAsXG4gICAgICAgIHBhc3M6IDAsXG4gICAgICAgIGZhaWw6IDAsXG4gICAgICAgIHNraXA6IDAsXG4gICAgICAgIHRvZG86IDAsXG4gICAgICB9LFxuXG4gICAgICAvLyBhIGNvdW50IG9mIGFsbCB0aGUgdGVzdCBzdWl0ZXMgcnVuXG4gICAgICBzdWl0ZUNvdW50czoge1xuICAgICAgICB0b3RhbDogMCxcbiAgICAgICAgcGFzczogMCxcbiAgICAgICAgZmFpbDogMCxcbiAgICAgICAgc2tpcDogMCxcbiAgICAgICAgdG9kbzogMCxcbiAgICAgIH0sXG5cbiAgICAgIC8vIHRvdGFsIGVsYXBzZWQgdGltZVxuICAgICAgdGltZTogMCxcblxuICAgICAgYmFpbG91dDogbnVsbCxcbiAgICB9XG5cbiAgICB0aGlzLnN0YXJ0ID0gRGF0ZS5ub3coKVxuICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB0aGlzLnNldFN0YXRlKHByZXZTdGF0ZSA9PiAoe1xuICAgICAgLi4ucHJldlN0YXRlLFxuICAgICAgdGltZTogdGhpcy50aW1lLFxuICAgICAgYXNzZXJ0Q291bnRzOiB0aGlzLmFzc2VydENvdW50cyxcbiAgICB9KSksIDIwMClcblxuICAgIC8vIGtlZXAgY291bnRlcnMgb24gdGhlIG9iamVjdCBpdHNlbGYsIHRvIGRlYm91bmNlXG4gICAgdGhpcy5hc3NlcnRDb3VudHMgPSB7XG4gICAgICB0b3RhbDogMCxcbiAgICAgIHBhc3M6IDAsXG4gICAgICBmYWlsOiAwLFxuICAgICAgc2tpcDogMCxcbiAgICAgIHRvZG86IDAsXG4gICAgfSxcbiAgICB0aGlzLmNvdW50ZXJCb3VuY2VyID0gbnVsbFxuXG4gICAgdGFwLm9uKCdzdWJ0ZXN0QWRkJywgdCA9PiB0aGlzLmFkZFRlc3QodCkpXG4gICAgdGFwLm9uKCdzdWJ0ZXN0U3RhcnQnLCB0ID0+IHRoaXMuc3RhcnRUZXN0KHQpKVxuICAgIHRhcC5vbignc3VidGVzdEVuZCcsIHQgPT4gdGhpcy5lbmRUZXN0KHQpKVxuICAgIHRhcC5vbignZW5kJywgKCkgPT4gdGhpcy5lbmRBbGwodGFwKSlcbiAgICB0YXAub25jZSgnYmFpbG91dCcsIG1lc3NhZ2UgPT4gdGhpcy5iYWlsb3V0KG1lc3NhZ2UpKVxuXG4gICAgLy8gSGFuZGxlIGRhdGEgdGhhdCBtaWdodCBjb21lIG91dCBvZiB0aGUgdGFwIG9iamVjdCBpdHNlbGYuXG4gICAgdGFwLm9uKCdleHRyYScsIHRoaXMub25SYXcodGFwLCAxKSlcbiAgICB0YXAucGFyc2VyLm9uKCdyZXN1bHQnLCByZXMgPT4ge1xuICAgICAgaWYgKHJlcy5mdWxsbmFtZSA9PT0gJ1RBUCcpIHtcbiAgICAgICAgdGhpcy5sb2dSZXModGFwLCByZXMpXG4gICAgICAgIHRoaXMuaW5jKHJlcy50b2RvID8gJ3RvZG8nXG4gICAgICAgICAgOiByZXMuc2tpcCA/ICdza2lwJ1xuICAgICAgICAgIDogcmVzLm9rID8gJ3Bhc3MnXG4gICAgICAgICAgOiAnZmFpbCdcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBjb25zdW1lIHRoZSB0ZXh0IHN0cmVhbSwgYnV0IGlnbm9yZSBpdC5cbiAgICAvLyB3ZSBnZXQgYWxsIHdlIG5lZWQgZnJvbSB0aGUgY2hpbGQgdGVzdCBvYmplY3RzLlxuICAgIHRoaXMudGFwUmVzdW1lKHRhcClcbiAgfVxuXG4gIHRhcFJlc3VtZSAodGFwKSB7XG4gICAgdGFwLnJlc3VtZSgpXG4gIH1cblxuICBnZXQgdGltZSAoKSB7XG4gICAgcmV0dXJuIERhdGUubm93KCkgLSB0aGlzLnN0YXJ0XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XG4gICAgdGhpcy5tb3VudGVkID0gdHJ1ZVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQgKCkge1xuICAgIHRoaXMubW91bnRlZCA9IGZhbHNlXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuY291bnRlckJvdW5jZXIpXG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKVxuICB9XG5cbiAgYmFpbG91dCAoYmFpbG91dCwgdGVzdCA9IG51bGwpIHtcbiAgICB0aGlzLmJhaWxlZE91dCA9IGJhaWxvdXRcbiAgICByZXR1cm4gdGhpcy5zZXRTdGF0ZShwcmV2U3RhdGUgPT4gcHJldlN0YXRlLmJhaWxvdXQgPyBwcmV2U3RhdGUgOiAoe1xuICAgICAgLi4ucHJldlN0YXRlLFxuICAgICAgcnVuczogdGVzdCA/IHByZXZTdGF0ZS5ydW5zLmZpbHRlcih0ID0+IHQuY2hpbGRJZCAhPT0gdGVzdC5jaGlsZElkKSA6IFtdLFxuICAgICAgLy8gaWYgd2UgYmFpbCBvdXQsIHRoZW4gd2Ugc2hvdWxkIG9ubHkgc2hvdyB0aGUgYmFpbG91dCxcbiAgICAgIC8vIG9yIHRoZSBjb3VudHMgZ2V0IGNvbmZ1c2luZywgYmVjYXVzZSB3ZSBuZXZlciByZWNlaXZlIGEgdGVzdEVuZFxuICAgICAgLy8gZm9yIHRoZSBvdGhlciBvbmVzLlxuICAgICAgdGVzdHM6IHByZXZTdGF0ZS50ZXN0cy5maWx0ZXIodCA9PlxuICAgICAgICB0ZXN0ID8gdC5jaGlsZElkID09PSB0ZXN0LmNoaWxkSWQgOlxuICAgICAgICB0LnJlc3VsdHMgJiYgdC5yZXN1bHRzLmJhaWxvdXQgPT09IGJhaWxvdXQpLFxuICAgICAgYmFpbG91dCxcbiAgICAgIGFzc2VydENvdW50czogdGhpcy5hc3NlcnRDb3VudHMsXG4gICAgICB0aW1lOiB0aGlzLnRpbWUsXG4gICAgfSkpXG4gIH1cblxuICBpbmMgKHR5cGUpIHtcbiAgICB0aGlzLmFzc2VydENvdW50cy50b3RhbCsrXG4gICAgdGhpcy5hc3NlcnRDb3VudHNbdHlwZV0rK1xuICAgIGlmICh0aGlzLmNvdW50ZXJCb3VuY2VyKVxuICAgICAgcmV0dXJuXG4gICAgdGhpcy5jb3VudGVyQm91bmNlciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5jb3VudGVyQm91bmNlciA9IG51bGxcbiAgICAgIHRoaXMuc2V0U3RhdGUocHJldlN0YXRlID0+ICh7XG4gICAgICAgIC4uLnByZXZTdGF0ZSxcbiAgICAgICAgYXNzZXJ0Q291bnRzOiB0aGlzLmFzc2VydENvdW50c1xuICAgICAgfSkpXG4gICAgfSwgNTApXG4gIH1cblxuICBhZGRUZXN0ICh0ZXN0KSB7XG4gICAgdGhpcy5zZXRTdGF0ZShwcmV2U3RhdGUgPT4gKHtcbiAgICAgIC4uLnByZXZTdGF0ZSxcbiAgICAgIHRlc3RzOiBwcmV2U3RhdGUudGVzdHMuY29uY2F0KHRlc3QpLFxuICAgICAgc3VpdGVDb3VudHM6IHtcbiAgICAgICAgLi4ucHJldlN0YXRlLnN1aXRlQ291bnRzLFxuICAgICAgICB0b3RhbDogcHJldlN0YXRlLnN1aXRlQ291bnRzLnRvdGFsICsgMSxcbiAgICAgIH0sXG4gICAgICBhc3NlcnRDb3VudHM6IHRoaXMuYXNzZXJ0Q291bnRzLFxuICAgICAgdGltZTogdGhpcy50aW1lLFxuICAgIH0pKVxuXG4gICAgdGVzdFxuICAgICAgLm9uKCdwcmVwcm9jZXNzJywgb3B0aW9ucyA9PiBvcHRpb25zLnN0ZGlvID0gJ3BpcGUnKVxuICAgICAgLm9uKCdwcm9jZXNzJywgcHJvYyA9PiB7XG4gICAgICAgIHByb2Muc3RkZXJyLnNldEVuY29kaW5nKCd1dGY4JylcbiAgICAgICAgcHJvYy5zdGRlcnIub24oJ2RhdGEnLCB0aGlzLm9uUmF3KHRlc3QsIDIpKVxuICAgICAgfSlcbiAgICAgIC5wYXJzZXJcbiAgICAgICAgLm9uKCdleHRyYScsIHRoaXMub25SYXcodGVzdCwgMSkpXG4gICAgICAgIC5vbigncGFzcycsIHJlcyA9PiB0aGlzLmluYygncGFzcycpKVxuICAgICAgICAub24oJ3RvZG8nLCByZXMgPT4gKHRoaXMuaW5jKCd0b2RvJyksIHRoaXMubG9nUmVzKHRlc3QsIHJlcykpKVxuICAgICAgICAub24oJ3NraXAnLCByZXMgPT4gKHRoaXMuaW5jKCdza2lwJyksIHRoaXMubG9nUmVzKHRlc3QsIHJlcykpKVxuICAgICAgICAub24oJ2ZhaWwnLCByZXMgPT4gKHRoaXMuaW5jKCdmYWlsJyksIHRoaXMubG9nUmVzKHRlc3QsIHJlcykpKVxuICB9XG5cbiAgb25SYXcgKHRlc3QsIGZkKSB7XG4gICAgY29uc3QgcCA9IGAgJHtmZH0+YFxuICAgIHJldHVybiByYXcgPT4ge1xuICAgICAgY29uc3QgcHJlZiA9IGNoYWxrLmJvbGQuZGltKHRlc3QubmFtZSArIHAgKyAnICcpXG4gICAgICByYXcgPSByYXcucmVwbGFjZSgvXFxuJC8sICcnKS5yZXBsYWNlKC9eL2dtLCBwcmVmKVxuICAgICAgdGhpcy5zZXRTdGF0ZShwcmV2U3RhdGUgPT4gKHtcbiAgICAgICAgLi4ucHJldlN0YXRlLFxuICAgICAgICBsb2c6IHByZXZTdGF0ZS5sb2cuY29uY2F0KHtyYXd9KSxcbiAgICAgICAgYXNzZXJ0Q291bnRzOiB0aGlzLmFzc2VydENvdW50cyxcbiAgICAgIH0pKVxuICAgIH1cbiAgfVxuXG4gIGxvZ1JlcyAodGVzdCwgcmVzKSB7XG4gICAgcmVzLnRlc3ROYW1lID0gdGVzdC5uYW1lXG4gICAgdGhpcy5zZXRTdGF0ZShwcmV2U3RhdGUgPT4gKHtcbiAgICAgIC4uLnByZXZTdGF0ZSxcbiAgICAgIGxvZzogcHJldlN0YXRlLmxvZy5jb25jYXQoe3Jlc30pLFxuICAgICAgYXNzZXJ0Q291bnRzOiB0aGlzLmFzc2VydENvdW50cyxcbiAgICAgIHRpbWU6IHRoaXMudGltZSxcbiAgICB9KSlcbiAgfVxuXG4gIHN0YXJ0VGVzdCAodGVzdCkge1xuICAgIHRlc3Quc3RhcnRUaW1lID0gRGF0ZS5ub3coKVxuICAgIHRlc3Qub25jZSgnYmFpbG91dCcsIG1lc3NhZ2UgPT4gdGhpcy5iYWlsb3V0KG1lc3NhZ2UsIHRlc3QpKVxuICAgIHRoaXMuc2V0U3RhdGUocHJldlN0YXRlID0+IHByZXZTdGF0ZS5iYWlsb3V0ID8gcHJldlN0YXRlIDogKHtcbiAgICAgIC4uLnByZXZTdGF0ZSxcbiAgICAgIHJ1bnM6IHByZXZTdGF0ZS5ydW5zLmNvbmNhdCh0ZXN0KSxcbiAgICAgIGFzc2VydENvdW50czogdGhpcy5hc3NlcnRDb3VudHMsXG4gICAgfSkpXG4gIH1cblxuICBlbmRUZXN0ICh0ZXN0KSB7XG4gICAgdGVzdC5lbmRUaW1lID0gRGF0ZS5ub3coKVxuXG4gICAgLy8gcHV0IGl0IGluIHRoZSBhcHByb3ByaWF0ZSBidWNrZXQuXG4gICAgLy8gbGl2ZSB1cGRhdGUgYXNzZXJ0aW9uIGhhbmRlZCBieSB0YXAucGFyc2VyIGV2ZW50XG4gICAgY29uc3Qgb2sgPSB0ZXN0LnJlc3VsdHMgJiYgdGVzdC5yZXN1bHRzLm9rXG4gICAgY29uc3Qgc2tpcCA9IHRlc3Qub3B0aW9ucy5za2lwICYmIG9rICE9PSBmYWxzZVxuICAgIGNvbnN0IHRvZG8gPSB0ZXN0Lm9wdGlvbnMudG9kbyAmJiBvayAhPT0gZmFsc2VcbiAgICBjb25zdCBidWNrZXQgPVxuICAgICAgc2tpcCA/ICdza2lwJ1xuICAgICAgOiB0b2RvID8gJ3RvZG8nXG4gICAgICA6ICFvayA/ICdmYWlsJ1xuICAgICAgOiAncGFzcydcblxuICAgIHRoaXMuc2V0U3RhdGUocHJldlN0YXRlID0+IHByZXZTdGF0ZS5iYWlsb3V0ID8gcHJldlN0YXRlIDogKHtcbiAgICAgIC4uLnByZXZTdGF0ZSxcbiAgICAgIGxvZzogcHJldlN0YXRlLmxvZy5jb25jYXQoe3Rlc3R9KSxcbiAgICAgIHJ1bnM6IHByZXZTdGF0ZS5ydW5zLmZpbHRlcih0ID0+IHQuY2hpbGRJZCAhPT0gdGVzdC5jaGlsZElkKSxcbiAgICAgIHN1aXRlQ291bnRzOiB7XG4gICAgICAgIC4uLnByZXZTdGF0ZS5zdWl0ZUNvdW50cyxcbiAgICAgICAgW2J1Y2tldF06IHByZXZTdGF0ZS5zdWl0ZUNvdW50c1tidWNrZXRdICsgMSxcbiAgICAgIH0sXG4gICAgICB0aW1lOiB0aGlzLnRpbWUsXG4gICAgICBhc3NlcnRDb3VudHM6IHRoaXMuYXNzZXJ0Q291bnRzLFxuICAgIH0pKVxuICB9XG5cbiAgZW5kQWxsICh0YXApIHtcbiAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpXG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLmNvdW50ZXJCb3VuY2VyKVxuICAgIHRoaXMuc2V0U3RhdGUocHJldlN0YXRlID0+ICh7XG4gICAgICAuLi5wcmV2U3RhdGUsXG4gICAgICByZXN1bHRzOiB0YXAucmVzdWx0cyxcbiAgICAgIGFzc2VydENvdW50czogdGhpcy5hc3NlcnRDb3VudHMsXG4gICAgICB0aW1lOiB0YXAudGltZSB8fCB0aGlzLnRpbWUsXG4gICAgfSkpXG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHtMb2csIFJ1bnMsIFN1bW1hcnksIEZvb3Rlcn0gPSB0aGlzXG4gICAgcmV0dXJuICg8Qm94IGZsZXhEaXJlY3Rpb249XCJjb2x1bW5cIj5cbiAgICAgIDxMb2cgbG9nPXt0aGlzLnN0YXRlLmxvZ30gLz5cbiAgICAgIDxSdW5zIHJ1bnM9e3RoaXMuc3RhdGUucnVuc30gLz57XG4gICAgICB0aGlzLnN0YXRlLnJlc3VsdHMgPyAoXG4gICAgICAgIDxTdW1tYXJ5XG4gICAgICAgICAgdGVzdHM9e3RoaXMuc3RhdGUudGVzdHN9XG4gICAgICAgICAgcmVzdWx0cz17dGhpcy5zdGF0ZS5yZXN1bHRzfSAvPlxuICAgICAgICApIDogPFRleHQ+PC9UZXh0PlxuICAgICAgfTxGb290ZXJcbiAgICAgICAgc3VpdGVDb3VudHM9e3RoaXMuc3RhdGUuc3VpdGVDb3VudHN9XG4gICAgICAgIGFzc2VydENvdW50cz17dGhpcy5zdGF0ZS5hc3NlcnRDb3VudHN9XG4gICAgICAgIHRpbWU9e3RoaXMuc3RhdGUudGltZX0gLz5cbiAgICA8L0JveD4pXG4gIH1cbn1cblxuQmFzZS5Bc3NlcnRDb3VudHMgPSBBc3NlcnRDb3VudHNcbkJhc2UuQXNzZXJ0TmFtZSA9IEFzc2VydE5hbWVcbkJhc2UuQ291bnRzID0gQ291bnRzXG5CYXNlLkZvb3RlciA9IEZvb3RlclxuQmFzZS5Mb2cgPSBMb2dcbkJhc2UuUGFzc0ZhaWwgPSBQYXNzRmFpbFxuQmFzZS5SZXN1bHQgPSBSZXN1bHRcbkJhc2UuUnVucyA9IFJ1bnNcbkJhc2UuU3RhdHVzTWFyayA9IFN0YXR1c01hcmtcbkJhc2UuU3VpdGVDb3VudHMgPSBTdWl0ZUNvdW50c1xuQmFzZS5TdW1tYXJ5ID0gU3VtbWFyeVxuQmFzZS5UZXN0UG9pbnQgPSBUZXN0UG9pbnRcbkJhc2UuVGVzdCA9IFRlc3RcblxubW9kdWxlLmV4cG9ydHMgPSBCYXNlXG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLEtBQUssR0FBR0MsT0FBTyxDQUFDLE9BQU8sQ0FBQztBQUM5QixNQUFNQyxFQUFFLEdBQUdELE9BQU8sQ0FBQyxJQUFJLENBQUM7QUFDeEIsTUFBTUUsU0FBUyxHQUFHRixPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDL0MsTUFBTTtFQUFDRyxTQUFTO0VBQUVDLEdBQUc7RUFBRUM7QUFBSSxDQUFDLEdBQUdMLE9BQU8sQ0FBQyxLQUFLLENBQUM7QUFDN0MsTUFBTU0sTUFBTSxHQUFHTixPQUFPLENBQUMsWUFBWSxDQUFDO0FBQ3BDLE1BQU1PLEtBQUssR0FBR1AsT0FBTyxDQUFDLE9BQU8sQ0FBQzs7QUFFOUI7QUFDQSxNQUFNUSxZQUFZLEdBQUdOLFNBQVMsQ0FBQyxvQkFBb0IsQ0FBQztBQUNwRCxNQUFNTyxVQUFVLEdBQUdQLFNBQVMsQ0FBQyxrQkFBa0IsQ0FBQztBQUNoRCxNQUFNUSxNQUFNLEdBQUdSLFNBQVMsQ0FBQyxhQUFhLENBQUM7QUFDdkMsTUFBTVMsTUFBTSxHQUFHVCxTQUFTLENBQUMsYUFBYSxDQUFDO0FBQ3ZDLE1BQU1VLEdBQUcsR0FBR1YsU0FBUyxDQUFDLFVBQVUsQ0FBQztBQUNqQyxNQUFNVyxRQUFRLEdBQUdYLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQztBQUM1QyxNQUFNWSxNQUFNLEdBQUdaLFNBQVMsQ0FBQyxhQUFhLENBQUM7QUFDdkMsTUFBTWEsSUFBSSxHQUFHYixTQUFTLENBQUMsV0FBVyxDQUFDO0FBQ25DLE1BQU1jLFVBQVUsR0FBR2QsU0FBUyxDQUFDLGtCQUFrQixDQUFDO0FBQ2hELE1BQU1lLFdBQVcsR0FBR2YsU0FBUyxDQUFDLG1CQUFtQixDQUFDO0FBQ2xELE1BQU1nQixPQUFPLEdBQUdoQixTQUFTLENBQUMsY0FBYyxDQUFDO0FBQ3pDLE1BQU1pQixTQUFTLEdBQUdqQixTQUFTLENBQUMsaUJBQWlCLENBQUM7QUFDOUMsTUFBTWtCLElBQUksR0FBR2xCLFNBQVMsQ0FBQyxXQUFXLENBQUM7QUFFbkMsTUFBTW1CLElBQUksU0FBU3RCLEtBQUssQ0FBQ3VCLFNBQVMsQ0FBQztFQUNqQyxJQUFJSixPQUFPLEdBQUk7SUFDYixPQUFPQSxPQUFPO0VBQ2hCO0VBQ0EsSUFBSUgsSUFBSSxHQUFJO0lBQ1YsT0FBT0EsSUFBSTtFQUNiO0VBQ0EsSUFBSUgsR0FBRyxHQUFJO0lBQ1QsT0FBT0EsR0FBRztFQUNaO0VBQ0EsSUFBSUQsTUFBTSxHQUFJO0lBQ1osT0FBT0EsTUFBTTtFQUNmO0VBRUFZLFdBQVcsQ0FBRTtJQUFFQztFQUFJLENBQUMsRUFBRTtJQUNwQixLQUFLLEVBQUU7SUFFUCxJQUFJLENBQUNDLE9BQU8sR0FBRyxLQUFLO0lBQ3BCLElBQUksQ0FBQ0MsS0FBSyxHQUFHO01BQ1g7TUFDQTtNQUNBQyxHQUFHLEVBQUUsRUFBRTtNQUVQO01BQ0FDLEtBQUssRUFBRSxFQUFFO01BRVQ7TUFDQUMsSUFBSSxFQUFFLEVBQUU7TUFFUjtNQUNBQyxPQUFPLEVBQUUsSUFBSTtNQUViO01BQ0E7TUFDQUMsWUFBWSxFQUFFO1FBQ1pDLEtBQUssRUFBRSxDQUFDO1FBQ1JDLElBQUksRUFBRSxDQUFDO1FBQ1BDLElBQUksRUFBRSxDQUFDO1FBQ1BDLElBQUksRUFBRSxDQUFDO1FBQ1BDLElBQUksRUFBRTtNQUNSLENBQUM7TUFFRDtNQUNBQyxXQUFXLEVBQUU7UUFDWEwsS0FBSyxFQUFFLENBQUM7UUFDUkMsSUFBSSxFQUFFLENBQUM7UUFDUEMsSUFBSSxFQUFFLENBQUM7UUFDUEMsSUFBSSxFQUFFLENBQUM7UUFDUEMsSUFBSSxFQUFFO01BQ1IsQ0FBQztNQUVEO01BQ0FFLElBQUksRUFBRSxDQUFDO01BRVBDLE9BQU8sRUFBRTtJQUNYLENBQUM7SUFFRCxJQUFJLENBQUNDLEtBQUssR0FBR0MsSUFBSSxDQUFDQyxHQUFHLEVBQUU7SUFDdkIsSUFBSSxDQUFDQyxLQUFLLEdBQUdDLFdBQVcsQ0FBQyxNQUFNLElBQUksQ0FBQ0MsUUFBUSxDQUFDQyxTQUFTLEtBQUs7TUFDekQsR0FBR0EsU0FBUztNQUNaUixJQUFJLEVBQUUsSUFBSSxDQUFDQSxJQUFJO01BQ2ZQLFlBQVksRUFBRSxJQUFJLENBQUNBO0lBQ3JCLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDOztJQUVUO0lBQ0EsSUFBSSxDQUFDQSxZQUFZLEdBQUc7TUFDbEJDLEtBQUssRUFBRSxDQUFDO01BQ1JDLElBQUksRUFBRSxDQUFDO01BQ1BDLElBQUksRUFBRSxDQUFDO01BQ1BDLElBQUksRUFBRSxDQUFDO01BQ1BDLElBQUksRUFBRTtJQUNSLENBQUMsRUFDRCxJQUFJLENBQUNXLGNBQWMsR0FBRyxJQUFJO0lBRTFCdkIsR0FBRyxDQUFDd0IsRUFBRSxDQUFDLFlBQVksRUFBRUMsQ0FBQyxJQUFJLElBQUksQ0FBQ0MsT0FBTyxDQUFDRCxDQUFDLENBQUMsQ0FBQztJQUMxQ3pCLEdBQUcsQ0FBQ3dCLEVBQUUsQ0FBQyxjQUFjLEVBQUVDLENBQUMsSUFBSSxJQUFJLENBQUNFLFNBQVMsQ0FBQ0YsQ0FBQyxDQUFDLENBQUM7SUFDOUN6QixHQUFHLENBQUN3QixFQUFFLENBQUMsWUFBWSxFQUFFQyxDQUFDLElBQUksSUFBSSxDQUFDRyxPQUFPLENBQUNILENBQUMsQ0FBQyxDQUFDO0lBQzFDekIsR0FBRyxDQUFDd0IsRUFBRSxDQUFDLEtBQUssRUFBRSxNQUFNLElBQUksQ0FBQ0ssTUFBTSxDQUFDN0IsR0FBRyxDQUFDLENBQUM7SUFDckNBLEdBQUcsQ0FBQzhCLElBQUksQ0FBQyxTQUFTLEVBQUVDLE9BQU8sSUFBSSxJQUFJLENBQUNoQixPQUFPLENBQUNnQixPQUFPLENBQUMsQ0FBQzs7SUFFckQ7SUFDQS9CLEdBQUcsQ0FBQ3dCLEVBQUUsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDUSxLQUFLLENBQUNoQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDbkNBLEdBQUcsQ0FBQ2lDLE1BQU0sQ0FBQ1QsRUFBRSxDQUFDLFFBQVEsRUFBRVUsR0FBRyxJQUFJO01BQzdCLElBQUlBLEdBQUcsQ0FBQ0MsUUFBUSxLQUFLLEtBQUssRUFBRTtRQUMxQixJQUFJLENBQUNDLE1BQU0sQ0FBQ3BDLEdBQUcsRUFBRWtDLEdBQUcsQ0FBQztRQUNyQixJQUFJLENBQUNHLEdBQUcsQ0FBQ0gsR0FBRyxDQUFDdEIsSUFBSSxHQUFHLE1BQU0sR0FDdEJzQixHQUFHLENBQUN2QixJQUFJLEdBQUcsTUFBTSxHQUNqQnVCLEdBQUcsQ0FBQ0ksRUFBRSxHQUFHLE1BQU0sR0FDZixNQUFNLENBQ1Q7TUFDSDtJQUNGLENBQUMsQ0FBQzs7SUFFRjtJQUNBO0lBQ0EsSUFBSSxDQUFDQyxTQUFTLENBQUN2QyxHQUFHLENBQUM7RUFDckI7RUFFQXVDLFNBQVMsQ0FBRXZDLEdBQUcsRUFBRTtJQUNkQSxHQUFHLENBQUN3QyxNQUFNLEVBQUU7RUFDZDtFQUVBLElBQUkxQixJQUFJLEdBQUk7SUFDVixPQUFPRyxJQUFJLENBQUNDLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0YsS0FBSztFQUNoQztFQUVBeUIsaUJBQWlCLEdBQUk7SUFDbkIsSUFBSSxDQUFDeEMsT0FBTyxHQUFHLElBQUk7RUFDckI7RUFFQXlDLG9CQUFvQixHQUFJO0lBQ3RCLElBQUksQ0FBQ3pDLE9BQU8sR0FBRyxLQUFLO0lBQ3BCMEMsWUFBWSxDQUFDLElBQUksQ0FBQ3BCLGNBQWMsQ0FBQztJQUNqQ3FCLGFBQWEsQ0FBQyxJQUFJLENBQUN6QixLQUFLLENBQUM7RUFDM0I7RUFFQUosT0FBTyxDQUFFQSxPQUFPLEVBQUU4QixJQUFJLEdBQUcsSUFBSSxFQUFFO0lBQzdCLElBQUksQ0FBQ0MsU0FBUyxHQUFHL0IsT0FBTztJQUN4QixPQUFPLElBQUksQ0FBQ00sUUFBUSxDQUFDQyxTQUFTLElBQUlBLFNBQVMsQ0FBQ1AsT0FBTyxHQUFHTyxTQUFTLEdBQUk7TUFDakUsR0FBR0EsU0FBUztNQUNaakIsSUFBSSxFQUFFd0MsSUFBSSxHQUFHdkIsU0FBUyxDQUFDakIsSUFBSSxDQUFDMEMsTUFBTSxDQUFDdEIsQ0FBQyxJQUFJQSxDQUFDLENBQUN1QixPQUFPLEtBQUtILElBQUksQ0FBQ0csT0FBTyxDQUFDLEdBQUcsRUFBRTtNQUN4RTtNQUNBO01BQ0E7TUFDQTVDLEtBQUssRUFBRWtCLFNBQVMsQ0FBQ2xCLEtBQUssQ0FBQzJDLE1BQU0sQ0FBQ3RCLENBQUMsSUFDN0JvQixJQUFJLEdBQUdwQixDQUFDLENBQUN1QixPQUFPLEtBQUtILElBQUksQ0FBQ0csT0FBTyxHQUNqQ3ZCLENBQUMsQ0FBQ25CLE9BQU8sSUFBSW1CLENBQUMsQ0FBQ25CLE9BQU8sQ0FBQ1MsT0FBTyxLQUFLQSxPQUFPLENBQUM7TUFDN0NBLE9BQU87TUFDUFIsWUFBWSxFQUFFLElBQUksQ0FBQ0EsWUFBWTtNQUMvQk8sSUFBSSxFQUFFLElBQUksQ0FBQ0E7SUFDYixDQUFFLENBQUM7RUFDTDtFQUVBdUIsR0FBRyxDQUFFWSxJQUFJLEVBQUU7SUFDVCxJQUFJLENBQUMxQyxZQUFZLENBQUNDLEtBQUssRUFBRTtJQUN6QixJQUFJLENBQUNELFlBQVksQ0FBQzBDLElBQUksQ0FBQyxFQUFFO0lBQ3pCLElBQUksSUFBSSxDQUFDMUIsY0FBYyxFQUNyQjtJQUNGLElBQUksQ0FBQ0EsY0FBYyxHQUFHMkIsVUFBVSxDQUFDLE1BQU07TUFDckMsSUFBSSxDQUFDM0IsY0FBYyxHQUFHLElBQUk7TUFDMUIsSUFBSSxDQUFDRixRQUFRLENBQUNDLFNBQVMsS0FBSztRQUMxQixHQUFHQSxTQUFTO1FBQ1pmLFlBQVksRUFBRSxJQUFJLENBQUNBO01BQ3JCLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxFQUFFLEVBQUUsQ0FBQztFQUNSO0VBRUFtQixPQUFPLENBQUVtQixJQUFJLEVBQUU7SUFDYixJQUFJLENBQUN4QixRQUFRLENBQUNDLFNBQVMsS0FBSztNQUMxQixHQUFHQSxTQUFTO01BQ1psQixLQUFLLEVBQUVrQixTQUFTLENBQUNsQixLQUFLLENBQUMrQyxNQUFNLENBQUNOLElBQUksQ0FBQztNQUNuQ2hDLFdBQVcsRUFBRTtRQUNYLEdBQUdTLFNBQVMsQ0FBQ1QsV0FBVztRQUN4QkwsS0FBSyxFQUFFYyxTQUFTLENBQUNULFdBQVcsQ0FBQ0wsS0FBSyxHQUFHO01BQ3ZDLENBQUM7TUFDREQsWUFBWSxFQUFFLElBQUksQ0FBQ0EsWUFBWTtNQUMvQk8sSUFBSSxFQUFFLElBQUksQ0FBQ0E7SUFDYixDQUFDLENBQUMsQ0FBQztJQUVIK0IsSUFBSSxDQUNEckIsRUFBRSxDQUFDLFlBQVksRUFBRTRCLE9BQU8sSUFBSUEsT0FBTyxDQUFDQyxLQUFLLEdBQUcsTUFBTSxDQUFDLENBQ25EN0IsRUFBRSxDQUFDLFNBQVMsRUFBRThCLElBQUksSUFBSTtNQUNyQkEsSUFBSSxDQUFDQyxNQUFNLENBQUNDLFdBQVcsQ0FBQyxNQUFNLENBQUM7TUFDL0JGLElBQUksQ0FBQ0MsTUFBTSxDQUFDL0IsRUFBRSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUNRLEtBQUssQ0FBQ2EsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQzdDLENBQUMsQ0FBQyxDQUNEWixNQUFNLENBQ0pULEVBQUUsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDUSxLQUFLLENBQUNhLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUNoQ3JCLEVBQUUsQ0FBQyxNQUFNLEVBQUVVLEdBQUcsSUFBSSxJQUFJLENBQUNHLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUNuQ2IsRUFBRSxDQUFDLE1BQU0sRUFBRVUsR0FBRyxLQUFLLElBQUksQ0FBQ0csR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLElBQUksQ0FBQ0QsTUFBTSxDQUFDUyxJQUFJLEVBQUVYLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FDN0RWLEVBQUUsQ0FBQyxNQUFNLEVBQUVVLEdBQUcsS0FBSyxJQUFJLENBQUNHLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxJQUFJLENBQUNELE1BQU0sQ0FBQ1MsSUFBSSxFQUFFWCxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQzdEVixFQUFFLENBQUMsTUFBTSxFQUFFVSxHQUFHLEtBQUssSUFBSSxDQUFDRyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsSUFBSSxDQUFDRCxNQUFNLENBQUNTLElBQUksRUFBRVgsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUNwRTtFQUVBRixLQUFLLENBQUVhLElBQUksRUFBRVksRUFBRSxFQUFFO0lBQ2YsTUFBTUMsQ0FBQyxHQUFJLElBQUdELEVBQUcsR0FBRTtJQUNuQixPQUFPRSxHQUFHLElBQUk7TUFDWixNQUFNQyxJQUFJLEdBQUc3RSxLQUFLLENBQUM4RSxJQUFJLENBQUNDLEdBQUcsQ0FBQ2pCLElBQUksQ0FBQ2tCLElBQUksR0FBR0wsQ0FBQyxHQUFHLEdBQUcsQ0FBQztNQUNoREMsR0FBRyxHQUFHQSxHQUFHLENBQUNLLE9BQU8sQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUNBLE9BQU8sQ0FBQyxLQUFLLEVBQUVKLElBQUksQ0FBQztNQUNqRCxJQUFJLENBQUN2QyxRQUFRLENBQUNDLFNBQVMsS0FBSztRQUMxQixHQUFHQSxTQUFTO1FBQ1puQixHQUFHLEVBQUVtQixTQUFTLENBQUNuQixHQUFHLENBQUNnRCxNQUFNLENBQUM7VUFBQ1E7UUFBRyxDQUFDLENBQUM7UUFDaENwRCxZQUFZLEVBQUUsSUFBSSxDQUFDQTtNQUNyQixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7RUFDSDtFQUVBNkIsTUFBTSxDQUFFUyxJQUFJLEVBQUVYLEdBQUcsRUFBRTtJQUNqQkEsR0FBRyxDQUFDK0IsUUFBUSxHQUFHcEIsSUFBSSxDQUFDa0IsSUFBSTtJQUN4QixJQUFJLENBQUMxQyxRQUFRLENBQUNDLFNBQVMsS0FBSztNQUMxQixHQUFHQSxTQUFTO01BQ1puQixHQUFHLEVBQUVtQixTQUFTLENBQUNuQixHQUFHLENBQUNnRCxNQUFNLENBQUM7UUFBQ2pCO01BQUcsQ0FBQyxDQUFDO01BQ2hDM0IsWUFBWSxFQUFFLElBQUksQ0FBQ0EsWUFBWTtNQUMvQk8sSUFBSSxFQUFFLElBQUksQ0FBQ0E7SUFDYixDQUFDLENBQUMsQ0FBQztFQUNMO0VBRUFhLFNBQVMsQ0FBRWtCLElBQUksRUFBRTtJQUNmQSxJQUFJLENBQUNxQixTQUFTLEdBQUdqRCxJQUFJLENBQUNDLEdBQUcsRUFBRTtJQUMzQjJCLElBQUksQ0FBQ2YsSUFBSSxDQUFDLFNBQVMsRUFBRUMsT0FBTyxJQUFJLElBQUksQ0FBQ2hCLE9BQU8sQ0FBQ2dCLE9BQU8sRUFBRWMsSUFBSSxDQUFDLENBQUM7SUFDNUQsSUFBSSxDQUFDeEIsUUFBUSxDQUFDQyxTQUFTLElBQUlBLFNBQVMsQ0FBQ1AsT0FBTyxHQUFHTyxTQUFTLEdBQUk7TUFDMUQsR0FBR0EsU0FBUztNQUNaakIsSUFBSSxFQUFFaUIsU0FBUyxDQUFDakIsSUFBSSxDQUFDOEMsTUFBTSxDQUFDTixJQUFJLENBQUM7TUFDakN0QyxZQUFZLEVBQUUsSUFBSSxDQUFDQTtJQUNyQixDQUFFLENBQUM7RUFDTDtFQUVBcUIsT0FBTyxDQUFFaUIsSUFBSSxFQUFFO0lBQ2JBLElBQUksQ0FBQ3NCLE9BQU8sR0FBR2xELElBQUksQ0FBQ0MsR0FBRyxFQUFFOztJQUV6QjtJQUNBO0lBQ0EsTUFBTW9CLEVBQUUsR0FBR08sSUFBSSxDQUFDdkMsT0FBTyxJQUFJdUMsSUFBSSxDQUFDdkMsT0FBTyxDQUFDZ0MsRUFBRTtJQUMxQyxNQUFNM0IsSUFBSSxHQUFHa0MsSUFBSSxDQUFDTyxPQUFPLENBQUN6QyxJQUFJLElBQUkyQixFQUFFLEtBQUssS0FBSztJQUM5QyxNQUFNMUIsSUFBSSxHQUFHaUMsSUFBSSxDQUFDTyxPQUFPLENBQUN4QyxJQUFJLElBQUkwQixFQUFFLEtBQUssS0FBSztJQUM5QyxNQUFNOEIsTUFBTSxHQUNWekQsSUFBSSxHQUFHLE1BQU0sR0FDWEMsSUFBSSxHQUFHLE1BQU0sR0FDYixDQUFDMEIsRUFBRSxHQUFHLE1BQU0sR0FDWixNQUFNO0lBRVYsSUFBSSxDQUFDakIsUUFBUSxDQUFDQyxTQUFTLElBQUlBLFNBQVMsQ0FBQ1AsT0FBTyxHQUFHTyxTQUFTLEdBQUk7TUFDMUQsR0FBR0EsU0FBUztNQUNabkIsR0FBRyxFQUFFbUIsU0FBUyxDQUFDbkIsR0FBRyxDQUFDZ0QsTUFBTSxDQUFDO1FBQUNOO01BQUksQ0FBQyxDQUFDO01BQ2pDeEMsSUFBSSxFQUFFaUIsU0FBUyxDQUFDakIsSUFBSSxDQUFDMEMsTUFBTSxDQUFDdEIsQ0FBQyxJQUFJQSxDQUFDLENBQUN1QixPQUFPLEtBQUtILElBQUksQ0FBQ0csT0FBTyxDQUFDO01BQzVEbkMsV0FBVyxFQUFFO1FBQ1gsR0FBR1MsU0FBUyxDQUFDVCxXQUFXO1FBQ3hCLENBQUN1RCxNQUFNLEdBQUc5QyxTQUFTLENBQUNULFdBQVcsQ0FBQ3VELE1BQU0sQ0FBQyxHQUFHO01BQzVDLENBQUM7TUFDRHRELElBQUksRUFBRSxJQUFJLENBQUNBLElBQUk7TUFDZlAsWUFBWSxFQUFFLElBQUksQ0FBQ0E7SUFDckIsQ0FBRSxDQUFDO0VBQ0w7RUFFQXNCLE1BQU0sQ0FBRTdCLEdBQUcsRUFBRTtJQUNYNEMsYUFBYSxDQUFDLElBQUksQ0FBQ3pCLEtBQUssQ0FBQztJQUN6QnlCLGFBQWEsQ0FBQyxJQUFJLENBQUNyQixjQUFjLENBQUM7SUFDbEMsSUFBSSxDQUFDRixRQUFRLENBQUNDLFNBQVMsS0FBSztNQUMxQixHQUFHQSxTQUFTO01BQ1poQixPQUFPLEVBQUVOLEdBQUcsQ0FBQ00sT0FBTztNQUNwQkMsWUFBWSxFQUFFLElBQUksQ0FBQ0EsWUFBWTtNQUMvQk8sSUFBSSxFQUFFZCxHQUFHLENBQUNjLElBQUksSUFBSSxJQUFJLENBQUNBO0lBQ3pCLENBQUMsQ0FBQyxDQUFDO0VBQ0w7RUFFQXVELE1BQU0sR0FBSTtJQUNSLE1BQU07TUFBQ2pGLEdBQUc7TUFBRUcsSUFBSTtNQUFFRyxPQUFPO01BQUVQO0lBQU0sQ0FBQyxHQUFHLElBQUk7SUFDekMsb0JBQVEsb0JBQUMsR0FBRztNQUFDLGFBQWEsRUFBQztJQUFRLGdCQUNqQyxvQkFBQyxHQUFHO01BQUMsR0FBRyxFQUFFLElBQUksQ0FBQ2UsS0FBSyxDQUFDQztJQUFJLEVBQUcsZUFDNUIsb0JBQUMsSUFBSTtNQUFDLElBQUksRUFBRSxJQUFJLENBQUNELEtBQUssQ0FBQ0c7SUFBSyxFQUFHLEVBQy9CLElBQUksQ0FBQ0gsS0FBSyxDQUFDSSxPQUFPLGdCQUNoQixvQkFBQyxPQUFPO01BQ04sS0FBSyxFQUFFLElBQUksQ0FBQ0osS0FBSyxDQUFDRSxLQUFNO01BQ3hCLE9BQU8sRUFBRSxJQUFJLENBQUNGLEtBQUssQ0FBQ0k7SUFBUSxFQUFHLGdCQUM3QixvQkFBQyxJQUFJLE9BQVEsZUFDbEIsb0JBQUMsTUFBTTtNQUNOLFdBQVcsRUFBRSxJQUFJLENBQUNKLEtBQUssQ0FBQ1csV0FBWTtNQUNwQyxZQUFZLEVBQUUsSUFBSSxDQUFDWCxLQUFLLENBQUNLLFlBQWE7TUFDdEMsSUFBSSxFQUFFLElBQUksQ0FBQ0wsS0FBSyxDQUFDWTtJQUFLLEVBQUcsQ0FDdkI7RUFDUjtBQUNGO0FBRUFqQixJQUFJLENBQUNiLFlBQVksR0FBR0EsWUFBWTtBQUNoQ2EsSUFBSSxDQUFDWixVQUFVLEdBQUdBLFVBQVU7QUFDNUJZLElBQUksQ0FBQ1gsTUFBTSxHQUFHQSxNQUFNO0FBQ3BCVyxJQUFJLENBQUNWLE1BQU0sR0FBR0EsTUFBTTtBQUNwQlUsSUFBSSxDQUFDVCxHQUFHLEdBQUdBLEdBQUc7QUFDZFMsSUFBSSxDQUFDUixRQUFRLEdBQUdBLFFBQVE7QUFDeEJRLElBQUksQ0FBQ1AsTUFBTSxHQUFHQSxNQUFNO0FBQ3BCTyxJQUFJLENBQUNOLElBQUksR0FBR0EsSUFBSTtBQUNoQk0sSUFBSSxDQUFDTCxVQUFVLEdBQUdBLFVBQVU7QUFDNUJLLElBQUksQ0FBQ0osV0FBVyxHQUFHQSxXQUFXO0FBQzlCSSxJQUFJLENBQUNILE9BQU8sR0FBR0EsT0FBTztBQUN0QkcsSUFBSSxDQUFDRixTQUFTLEdBQUdBLFNBQVM7QUFDMUJFLElBQUksQ0FBQ0QsSUFBSSxHQUFHQSxJQUFJO0FBRWhCMEUsTUFBTSxDQUFDQyxPQUFPLEdBQUcxRSxJQUFJIn0=